"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[8259],{4233:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"deployment-guide/storage-providers/index","title":"Storage Providers","description":"The Storage Service supports multiple storage backends. You can switch between providers by changing the STORAGE_TYPE environment variable -- no code changes are required.","source":"@site/versioned_docs/version-3.0.0/deployment-guide/storage-providers/index.md","sourceDirName":"deployment-guide/storage-providers","slug":"/deployment-guide/storage-providers/","permalink":"/project-storage-service/docs/deployment-guide/storage-providers/","draft":false,"unlisted":false,"editUrl":"https://github.com/uncefact/project-storage-service/tree/next/versioned_docs/version-3.0.0/deployment-guide/storage-providers/index.md","tags":[],"version":"3.0.0","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Storage Providers"},"sidebar":"tutorialSidebar","previous":{"title":"Configuration","permalink":"/project-storage-service/docs/deployment-guide/configuration/"},"next":{"title":"Scaling","permalink":"/project-storage-service/docs/deployment-guide/scaling/"}}');var o=s(4848),i=s(8453);const t={sidebar_position:3,title:"Storage Providers"},d=void 0,c={},a=[{value:"Local Storage",id:"local-storage",level:2},{value:"Google Cloud Storage",id:"google-cloud-storage",level:2},{value:"Amazon Web Services (AWS S3)",id:"amazon-web-services-aws-s3",level:2},{value:"S3-Compatible Providers",id:"s3-compatible-providers",level:2},{value:"MinIO",id:"minio",level:3},{value:"DigitalOcean Spaces",id:"digitalocean-spaces",level:3},{value:"Cloudflare R2",id:"cloudflare-r2",level:3},{value:"S3 Configuration Reference",id:"s3-configuration-reference",level:2}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["The Storage Service supports multiple storage backends. You can switch between providers by changing the ",(0,o.jsx)(n.code,{children:"STORAGE_TYPE"})," environment variable -- no code changes are required."]}),"\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Local storage is for development only."})," Use a cloud provider for production deployments. Local filesystem storage does not scale beyond a single instance and data is lost if the container is removed."]})}),"\n",(0,o.jsx)(n.h2,{id:"local-storage",children:"Local Storage"}),"\n",(0,o.jsx)(n.p,{children:"Minimal configuration for local development. Files are stored on the local filesystem."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-env",children:"STORAGE_TYPE=local\nLOCAL_DIRECTORY=uploads\n"})}),"\n",(0,o.jsx)(n.h2,{id:"google-cloud-storage",children:"Google Cloud Storage"}),"\n",(0,o.jsxs)(n.p,{children:["Update your ",(0,o.jsx)(n.code,{children:".env"})," file:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-env",children:"STORAGE_TYPE=gcp\nGOOGLE_APPLICATION_CREDENTIALS=/tmp/service-account-file.json\n"})}),"\n",(0,o.jsx)(n.p,{children:"When running with Docker, mount your service account file into the container:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker run -d --env-file .env -p 3333:3333 \\\n  -v /path/to/local/gcp/service-account-file.json:/tmp/service-account-file.json \\\n  storage-service:latest\n"})}),"\n",(0,o.jsx)(n.h2,{id:"amazon-web-services-aws-s3",children:"Amazon Web Services (AWS S3)"}),"\n",(0,o.jsxs)(n.p,{children:["Update your ",(0,o.jsx)(n.code,{children:".env"})," file with AWS credentials:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-env",children:"STORAGE_TYPE=aws\nS3_REGION=ap-southeast-2\nAWS_ACCESS_KEY_ID=your-aws-access-key-id\nAWS_SECRET_ACCESS_KEY=your-aws-secret-access-key\nAVAILABLE_BUCKETS=documents,files\n"})}),"\n",(0,o.jsx)(n.p,{children:"Then run the container:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker run -d --env-file .env -p 3333:3333 storage-service:latest\n"})}),"\n",(0,o.jsxs)(n.p,{children:["For production deployments on AWS, consider using IAM roles instead of static credentials. See the ",(0,o.jsx)(n.a,{href:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html",children:"AWS documentation"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"s3-compatible-providers",children:"S3-Compatible Providers"}),"\n",(0,o.jsxs)(n.p,{children:["Any S3-compatible storage provider can be used by setting ",(0,o.jsx)(n.code,{children:"STORAGE_TYPE=aws"})," and configuring a custom endpoint via ",(0,o.jsx)(n.code,{children:"S3_ENDPOINT"}),". The service uses the standard S3 API, so any provider that implements this API will work."]}),"\n",(0,o.jsx)(n.h3,{id:"minio",children:"MinIO"}),"\n",(0,o.jsx)(n.p,{children:"Ideal for local development and self-hosted deployments:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-env",children:"STORAGE_TYPE=aws\nS3_ENDPOINT=http://minio:9000\nS3_FORCE_PATH_STYLE=true\nAWS_ACCESS_KEY_ID=minioadmin\nAWS_SECRET_ACCESS_KEY=minioadmin\nAVAILABLE_BUCKETS=documents,files\n"})}),"\n",(0,o.jsx)(n.h3,{id:"digitalocean-spaces",children:"DigitalOcean Spaces"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-env",children:"STORAGE_TYPE=aws\nS3_ENDPOINT=https://syd1.digitaloceanspaces.com\nAWS_ACCESS_KEY_ID=your-do-access-key-id\nAWS_SECRET_ACCESS_KEY=your-do-secret-access-key\nAVAILABLE_BUCKETS=documents,files\n"})}),"\n",(0,o.jsx)(n.h3,{id:"cloudflare-r2",children:"Cloudflare R2"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-env",children:"STORAGE_TYPE=aws\nS3_ENDPOINT=https://<account-id>.r2.cloudflarestorage.com\nS3_FORCE_PATH_STYLE=true\nAWS_ACCESS_KEY_ID=your-r2-access-key-id\nAWS_SECRET_ACCESS_KEY=your-r2-secret-access-key\nAVAILABLE_BUCKETS=documents,files\n"})}),"\n",(0,o.jsx)(n.h2,{id:"s3-configuration-reference",children:"S3 Configuration Reference"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Variable"}),(0,o.jsx)(n.th,{children:"Required"}),(0,o.jsx)(n.th,{children:"Description"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"S3_REGION"})}),(0,o.jsx)(n.td,{children:"Yes (for AWS S3)"}),(0,o.jsx)(n.td,{children:"AWS region. Not required when using a custom endpoint."})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"S3_ENDPOINT"})}),(0,o.jsx)(n.td,{children:"No"}),(0,o.jsx)(n.td,{children:"Custom endpoint URL for S3-compatible providers."})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"S3_FORCE_PATH_STYLE"})}),(0,o.jsx)(n.td,{children:"No"}),(0,o.jsxs)(n.td,{children:["Set to ",(0,o.jsx)(n.code,{children:"true"})," for path-style URLs (required for MinIO and Cloudflare R2)."]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"AWS_ACCESS_KEY_ID"})}),(0,o.jsx)(n.td,{children:"Yes"}),(0,o.jsx)(n.td,{children:"Access key for authentication."})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"AWS_SECRET_ACCESS_KEY"})}),(0,o.jsx)(n.td,{children:"Yes"}),(0,o.jsx)(n.td,{children:"Secret key for authentication."})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>d});var r=s(6540);const o={},i=r.createContext(o);function t(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);